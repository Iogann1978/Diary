CREATE TABLE IF NOT EXISTS "diary" ("ID" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "Date" TEXT, "Title" TEXT, "Descript" BLOB);
CREATE UNIQUE INDEX IF NOT EXISTS "index_diary_ID" on diary (ID ASC);
CREATE INDEX IF NOT EXISTS "index_diary_Descript" on diary (Descript ASC);
CREATE TABLE IF NOT EXISTS "tags" ("ID" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "Title" TEXT);
CREATE UNIQUE INDEX IF NOT EXISTS "index_tags_ID" on tags (ID ASC);
CREATE TABLE IF NOT EXISTS "link" ("ID" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "ID1" INTEGER, "ID2" INTEGER);
CREATE UNIQUE INDEX IF NOT EXISTS "index_link_ID" on link (ID ASC);
CREATE INDEX IF NOT EXISTS "index_link_ID1" on link (ID1 ASC);
CREATE INDEX IF NOT EXISTS "index_link_ID2" on link (ID2 ASC);
CREATE TRIGGER IF NOT EXISTS "trigger_delete_tags_diary" BEFORE DELETE ON tags BEGIN select RAISE(ABORT,"Есть связи с дневником") from link where ID2=old.ID;END;
